<div
  style="
    display: grid;
    grid-template-rows: 100%;
    grid-template-columns: 25% 25% 46%;
    grid-gap: 20px;
    justify-items: stretch;
    align-items: center;
  "
>
  <mat-form-field metavisionFormField>
    <mat-label>جستوجو</mat-label>
    <input
      matInput
      (keyup)="applyFilter($event)"
      placeholder="کلمه مورد نظر خود را بنویسید"
      #input
    />
  </mat-form-field>

  <mat-form-field metavisionFormField>
    <mat-label metavisionFontHelper>دسته محصول اصلی</mat-label>
    <mat-select (valueChange)="filterCategory($event)" [value]="0">
      <mat-option metavisionFontHelper [value]="0">همه</mat-option>
      @for (selectOption of selectOptions(); track $index) {
      <mat-option
        metavisionFontHelper
        [value]="selectOption.productCategoryId"
        >{{ selectOption.name }}</mat-option
      >
      }
    </mat-select>
  </mat-form-field>

  <button
    style="justify-self: end; margin-bottom: 10px"
    metavisionButtonHelper
    mat-raised-button
    color="primary"
    type="button"
    (click)="onAddNew()"
  >
    اضافه کردن
  </button>
</div>

<div>
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>
    @for (column of columns; track column) {
    <ng-container [matColumnDef]="column.columnDef">
      @if (column.columnDef === 'operations') {
      <th
        mat-header-cell
        *matHeaderCellDef
        metavisionFontHelper
        style="font-size: 15px; font-weight: bolder"
      >
        {{ column.header }}
      </th>
      }
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header
        metavisionFontHelper
        style="font-size: 15px; font-weight: bolder"
      >
        {{ column.header }}
      </th>

      @if (column.columnDef === 'isDeleted') {
      <td mat-cell metavisionFontHelper *matCellDef="let row">
        @if (column.cell(row) === "false") {
        <mat-icon
          class="text-success"
          style="font-size: 30px; font-weight: bold"
          >done</mat-icon
        >
        } @else {
        <mat-icon class="text-danger" style="font-size: 30px; font-weight: bold"
          >clear</mat-icon
        >
        }
      </td>
      } @if (column.columnDef === 'operations') {
      <td mat-cell metavisionFontHelper *matCellDef="let row">
        @if (!getStatus(+column.cell(row))) {
        <button
          type="button"
          class="btn btn-outline-warning white_on_hover"
          title="مشاهده/ویرایش"
          style="margin-left: 10px"
          (click)="getProductCategory(+column.cell(row))"
        >
          <mat-icon
            style="
              display: grid;
              align-content: center;
              justify-content: center;
            "
            >remove_red_eye</mat-icon
          >
        </button>
        <button
          type="button"
          class="btn btn-outline-secondary"
          title="مدیریت عکس ها"
          style="margin-left: 10px; align-items: center"
        >
          <mat-icon
            style="
              display: grid;
              align-content: center;
              justify-content: center;
            "
            >insert_photo</mat-icon
          >
        </button>
        <button
          type="button"
          class="btn btn-outline-danger"
          title="حذف"
          style="margin-left: 10px"
          (click)="onDelete(+column.cell(row))"
        >
          <mat-icon
            style="
              display: grid;
              align-content: center;
              justify-content: center;
            "
            >delete</mat-icon
          >
        </button>
        } @else {
        <button
          type="button"
          class="btn btn-outline-success white_on_hover"
          title="بازگردانی"
          style="margin-left: 10px"
          (click)="onDelete(+column.cell(row))"
        >
          <mat-icon
            style="
              display: grid;
              align-content: center;
              justify-content: center;
            "
            >replay</mat-icon
          >
        </button>
        }
      </td>
      } @else {
      <td mat-cell metavisionFontHelper *matCellDef="let row">
        {{ column.cell(row) }}
      </td>
      }
    </ng-container>
    }

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator
    metavisionFontHelper
    showFirstLastButtons
    [pageSizeOptions]="[25, 10, 5, 100]"
    aria-label="Select page of users"
  ></mat-paginator>
</div>
